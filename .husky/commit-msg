#!/bin/sh
echo "" 

if ! head -1 "$1" | grep -qE "^(feat|fix|chore|docs|test|style|refactor|perf|build|ci|revert)(\(.+?\))?: .{1,}$"; then
    echo "ğŸš« Aborting commit! ğŸš«"
    echo "âŒ Votre message de commit est invalide."
    echo "âœ… Format attendu :"
    echo "   - feat(scope): Ajout d'une nouvelle fonctionnalitÃ©"
    echo "   - fix(scope): Correction d'un bug"
    echo "   - chore: Maintenance et tÃ¢ches diverses"
    echo "   - docs: Mise Ã  jour de la documentation"
    echo "   - test: Ajout ou modification de tests"
    echo "   - style: Changement de style (indentation, espaces...)"
    echo "   - refactor: RÃ©Ã©criture de code sans changement de comportement"
    echo "   - perf: AmÃ©lioration des performances"
    echo "   - build: Changements impactant le build"
    echo "   - ci: Modifications du pipeline CI/CD"
    echo "   - revert: Annulation d'un commit prÃ©cÃ©dent"
    echo ""
    echo "ğŸ’¡ Astuce : Utilisez un message clair et concis pour faciliter la comprÃ©hension."
    echo "" 
    exit 1
fi
if ! head -1 "$1" | grep -qE "^.{1,88}$"; then
    echo "ğŸš« Aborting commit! ğŸš«"
    echo "âŒ Votre message de commit est trop long (max 88 caractÃ¨res)."
    echo "âœ‚ï¸ Essayez de le raccourcir tout en conservant son sens."
    echo "" 
    exit 1
fi

echo "âœ… Commit message valide ! ğŸš€"
echo "" 